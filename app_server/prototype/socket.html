<!DOCTYPE html>

<html>
    <head>
        <title>Socket testing prototype</title>
    </head>
    <body>
        <ul id="output"></ul>
        <form action="">
            <input type='text' id='input' autocomplete='off'>
            <button>Send</button>
        </form>
        <script src='http://localhost:3000/socket.io/socket.io.js'></script>
        <script>
            var socket = io('http://localhost:3000');

            var cookie = 'Fe26.2**2707b82d7f7cbd175110cd2c6416651eba9454c581988e80626d20e9aadd30f7*izsSDLahjzgCfQ5xuXzZkQ*OAwczABMU0DS7L93E_657b3M9rTHUyALRAa-b5Yg0KdlbkcD21oRmYRdoQTk3lUtkVY-7zfzLPCbOIx6QCtQ8m5Zat9DhgvZnLIfXCR-naDoVpxRIDMWjhaCai-27SjOxjDWVQ3YBjoRZ2vsQUg7rTD-6TXbw0AEGCSNlUXaYF0_99ZDzUffi-4J2DDLDQldPgQs-pvoQRtCN0Oi9CcqHyUDRZ6zJ1TiNRJMOFka17fofToP7_m70DgoKToNsx5vHfA5hQgtEgKQ-JA0PyJCIHdpUsLWeshK0hbLMIaP6GhVc2oY83dEX0_SW6X-kbR31mvsqjzPQqOLCM41XTQovBw8maKbPrv2Uj7sRjHhnVOmpGd_AROxNdFHVyMEnQEvCsOhotWNDMIzvolr7Panti3fgMIKrQsHUaAYFYiyws7yTCRz4vFfsMNh8FhLOmr5c4Cr4LQgjvLWZjX2YzXqLJXQ5ULOBeyDm47wD9FNLlweyahC9XmxdtjY6w5yOJQEw43nQ79kDfnQvL2IVUmIYtZzwy6FB4H1KRLRkwztu6OwzJEfzau-F4w5a3TMumURH73K-ZQl9Rm-IEURMeFeFp0pb1vnxiM3S8YRKiwPDVn0N7xFOzeMGAKb7a1Yz44a**6d20bc82deb40cbd824af95b2a7c6aae507a22e4bff2e4ab72ea98b359952246*FGjAi9TIbF3GhlGecRbZMXEjXKt3ezv2jVDu6MZFOWU';
            socket.emit('identify', cookie);

            socket.on('identify', function (data) {
                if (data == 'OK') {
                    alert('Connected');
                } else if (data == 'ERR') {
                    alert('Failed to connect');
                } else {
                    alert('Unknown response: ' + data);
                }
            });

            var form = document.querySelector('form');
            var input = document.querySelector('#input');
            var output = document.querySelector('#output');

            form.onsubmit = function () {
                socket.emit('comment', input.value);
                return false;
            };

            socket.on('comment', function (comment) {
                console.log(comment);
                var li = document.createElement('li');
                li.innerHTML = comment;
                output.appendChild(li);
            });
        </script>

    </body>
</html>

