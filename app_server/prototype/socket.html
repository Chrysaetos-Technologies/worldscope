<!DOCTYPE html>

<html>
    <head>
        <title>Socket testing prototype</title>
    </head>
    <body>
        <ul id="output"></ul>
        <form action="">
            <input type='text' id='input' autocomplete='off'>
            <button>Send</button>
        </form>
        <script src='http://localhost:3000/socket.io/socket.io.js'></script>
        <script>
            var socket = io('http://localhost:3000');

            var cookie = 'Fe26.2**53b739076384afec9eb2496658fcf4c005ebb5bdaa351fef021a083789a93e52*ALdSPNEXWVWUtdXfvsbOyQ*h_co76E6AUB8ygOBvn6cvAe5LHhN_fIwM1ijw2hV2o82DdTiBWHigADl-X-plcUuAasRfxwoxOGmDGSpjOOgdFaChbKxD-T0Z_LuAcLw9V8ukJsJJeKNXD1qpaNv05aA48rwdnTaKf4nEUkQVYNPmxw5VIpZT3t2WyAltt8-StC68a5tfvl6Gd0Nb8rDHfOmT8_fFG6Vp8wHwhSyUOF6YgUdDOVxzPghXCLpG8nthoGhxnIYJtNrh2w6IBeU8HmsClY1Snxl0oeI4odSjIOx28klcNjqfXBC9DZlm0Z9QXPSY80L3C07b0yxyz-foyKtQtAz05Tul6eAXlC-IbIoqmf4f_92reUs5aY7YXj4M8r1ApApAjhIVP7WWGbHofmvMXpQlpoxmv1-Hcj57Ki0LuOny1iymSxRDEKMPdiKTkBttN-WcjqH6W85rnqLux-LJBh3CccIQnBphZhT7MidlgRktV5TK7L3yuiAjlEHmjeB884lX86DmN6sxySQQltPv2Xj395TAuMCKxI0Bat1RrgDKBggudFoXrG87CTHDPR4R3L_pRHtStUU3otuAkqqjnLu4Gh8SC0xiO86IaT4_Fl6hLpVvi-RlWo9DmLPK-luT3aMxhDUvZ3Zq2KzsUVH**da21c8faec985e32949260b8016df8287eaf7efe9a79cce0d691760917def015*vQ1rwJ2E1ykNBK7JyQ2npC-YanTnhOuspimtuyZiC7o';
            socket.emit('identify', cookie);

            socket.on('identify', function (data) {
                if (data == 'OK') {
                    alert('Connected');
                } else if (data == 'ERR') {
                    alert('Failed to connect');
                } else {
                    alert('Unknown response: ' + data);
                }
            });

            var form = document.querySelector('form');
            var input = document.querySelector('#input');
            var output = document.querySelector('#output');

            form.onsubmit = function () {
                socket.emit('comment', input.value);
                return false;
            };

            socket.on('comment', function (comment) {
                console.log(comment);
                var li = document.createElement('li');
                li.innerHTML = comment;
                output.appendChild(li);
            });
        </script>

    </body>
</html>

